# AIS Project — система оптимизации складских запасов

Учебный проект по дисциплине **«Автоматизированные информационные системы»**.

Это веб-приложение, в котором пользователь:

- регистрируется и входит в систему;
- загружает CSV с данными о товарах и спросе;
- запускает оптимизацию запасов по математической модели;
- получает и скачивает отчёты с оптимальными размерами заказов;
- управляет своими файлами и отчётами через веб-интерфейс.

---

## Функциональность

- **Аутентификация и личный кабинет**
  - Регистрация и вход по логину/паролю
  - После входа пользователь видит только **свои** файлы данных и отчёты.

- **Работа с файлами**
  - Загрузка CSV с данными (форма на главной странице).
  - Проверка расширения и размера файла.
  - Удаление файла с подтверждением: вместе с файлом удаляются все связанные с ним отчёты. Логика загрузки, удаления и скачивания реализована через `fetch` в `static/js/file_ops.js`.

- **Генерация отчётов**
  - Для каждого загруженного файла можно открыть модальное окно и запустить оптимизацию с заданным ограничением на максимальный объём склада.
  - В модальном окне выводится таблица уже созданных отчётов по этому файлу (дата, допустимый объём склада, итоговая стоимость) с кнопками «Скачать» и «Удалить». Всё это делается на стороне клиента через `static/js/modal.js` и REST-эндпоинты `/generate_report`, `/get_reports`, `/download_report`, `/delete_report`.  

- **Интерактивный интерфейс**
  - Модальные окна, уведомления о создании отчёта, блокировка кнопок на время запросов ― всё это реализовано в JS, чтобы пользователь видел живую реакцию интерфейса, а не только перезагрузки страниц.  
  - На странице «Команда» аватарки участников «переворачиваются» при клике — изображение переключается между двумя версиями (условно «серьёзной» и «неформальной») с помощью `static/js/jaba.js`.

- **Документация API**
  - REST-эндпоинты описаны в стиле Swagger/Flasgger, так что можно открыть веб-интерфейс документации и потыкать запросы прямо из браузера.

- **Нагрузочное тестирование**
  - В `locustfile.py` описаны сценарии пользователей: просмотр HTML-страниц, массовая загрузка файлов и генерация отчётов. Это позволяет оценить поведение системы под нагрузкой.

---

## Архитектура и структура проекта

```text
ais_project/
  app.py              # создание Flask-приложения, конфиг, подключение БД, Swagger
  routes.py           # view-функции, REST-эндпоинты, логика файлов и отчётов
  optim.py            # математическая модель оптимизации запасов
  locustfile.py       # сценарии нагрузочного тестирования Locust
  my_data.csv         # пример входных данных
  requirements.txt    # зависимости Python

  database/
    __init__.py       # инициализация SQLAlchemy
    models.py         # модели User, DataFile, OptimizationReport

  instance/
    project_db.sqlite # рабочая БД (если используется SQLite)
    files/            # загруженные CSV
    reports/          # сгенерированные отчёты

  templates/
    index.html        # главная страница: загрузка файлов, список отчётов
    login.html        # форма входа
    register.html     # регистрация пользователя
    about.html        # краткое описание проекта
    team.html         # информация о команде

  static/
    css/              # стили
    js/
      file_ops.js     # загрузка файлов, удаление файлов и отчётов, скачивание отчётов
      modal.js        # модальное окно генерации отчётов и их список
      jaba.js         # визуальные эффекты на странице команды
    images/           # картинки для шаблонов
```

app.py создаёт экземпляр Flask, настраивает подключение к БД (через SQLALCHEMY_DATABASE_URI), папки для загрузки файлов и подключает Swagger.
database/models.py определяет три основные сущности: пользователя, загруженный файл и отчёт оптимизации, связанные внешними ключами.
routes.py реализует HTML-страницы и JSON-API: загрузка/удаление файлов, генерация отчётов, скачивание, работа сессий.
optim.py инкапсулирует всю математику по расчёту оптимальных заказов.
